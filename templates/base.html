<!-- Example: base_redesign.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Your App{% endblock %}</title>
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- Toastr (optional notifications) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
  <!-- Flatpickr (optional date picker) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <!-- DataTables (optional tables) -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
  <!-- Animate.css (optional animations) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <!-- AOS.js (optional scroll animations) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
  {% block extra_css %}
  <style>
  /* Add more spacing below the fixed topbar for all pages */
  .main-content-spacing {
    margin-top: 8rem !important; /* Increased space under topbar */
    min-height: 200px;
  }
  @media (max-width: 900px) {
    .main-content-spacing {
      margin-top: 6rem !important;
    }
  }
  </style>
  {% endblock %}
  {% block styles %}{% endblock %}
</head>
<body>
  <!-- Topbar START -->
  <div class="topbar d-flex align-items-center justify-content-between" style="position: fixed; top: 0; left: 0; right: 0; z-index: 1030; background: #2176c1; padding: 0.75rem 2rem; box-shadow: 0 1px 4px rgba(0,0,0,0.07);">
    <!-- Left: Logo & Brand -->
    <div class="d-flex align-items-center flex-shrink-0" style="min-width:0;">
      <!-- Hamburger menu button: only on mobile -->
      <button id="mobileSidebarToggle" aria-label="Open menu" class="hamburger d-flex d-md-none align-items-center justify-content-center me-2" type="button" style="background:none;border:none;">
        <span class="hamburger-box">
          <span class="hamburger-inner"></span>
        </span>
      </button>
      <a class="navbar-brand d-flex align-items-center" href="{{ url_for('main.dashboard') }}" style="margin-right: 1.5rem;">
        <span style="background:#fff; border-radius:12px; padding:4px 4px 4px 4px; display:flex; align-items:center; box-shadow:0 1px 4px rgba(0,0,0,0.07);">
          <img src="{{ url_for('static', filename='logo_gt.png') }}" alt="Logo" style="height:32px; width:32px; display:block;">
        </span>
        <span style="color:#fff; font-weight:600; margin-left:8px;">GlobalTech</span>
      </a>
    </div>

    <!-- Center: Search Bar -->
    <div class="search-bar flex-grow-1 d-none d-md-block" style="max-width: 400px; margin: 0 1rem;">
      <i class="fa fa-search" style="position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#1976d2;"></i>
      <input type="text" class="form-control" placeholder="Search" style="background:#e3ebfa; border:none; border-radius:2rem; padding-left:2.5rem;">
    </div>

    <!-- Right: Icons & Avatar -->
    <div class="topbar-icons d-flex align-items-center gap-3 flex-shrink-0">
      <div class="position-relative">
        <a href="#" class="text-white"><i class="fa fa-bell fa-lg"></i></a>
        <span class="badge" style="position:absolute;top:0;right:0;font-size:0.65rem;background:#e53935;color:#fff;padding:0 4px;border-radius:8px;">28</span>
      </div>
      <div class="position-relative">
        <a href="#" class="text-white"><i class="fa fa-envelope fa-lg"></i></a>
        <span class="badge" style="position:absolute;top:0;right:0;font-size:0.65rem;background:#e53935;color:#fff;padding:0 4px;border-radius:8px;">31</span>
      </div>
      <!-- User Dropdown -->
      <div class="dropdown">
        <button class="btn btn-link dropdown-toggle p-0" type="button" id="userMenu" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <img src="{{ user.photo_url if user.photo_url else url_for('static', filename='default_avatar.png') }}" alt="User" class="topbar-avatar" style="width:36px;height:36px;border-radius:50%;object-fit:cover;border:2px solid #fff;">
        </button>
        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenu" style="min-width:220px;border-radius:0.5rem;overflow:hidden;box-shadow:0 4px 16px;">
          <div class="dropdown-header" style="background:#f8f9fa;text-align:center;padding:1rem;">
            <img src="{{ user.photo_url if user.photo_url else url_for('static', filename='default_avatar.png') }}" alt="Avatar" style="width:60px;height:60px;border-radius:50%;object-fit:cover;margin-bottom:0.5rem;border:2px solid #dee2e6;">
            <h6 style="margin:0;font-weight:600;">{{ user.name or 'User Name' }}</h6>
            <a href="{{ url_for('main.profile', username=user.username) }}" class="btn btn-outline-primary btn-sm btn-view-profile" style="font-size:0.875rem;padding:0.3rem 0.75rem;border-radius:1rem;margin-top:0.5rem;">View Profile</a>
          </div>
          <div class="dropdown-divider" style="margin:0.5rem 0;"></div>
          <a class="dropdown-item" href="{{ url_for('main.dashboard') }}">
            <span class="item-label"><i class="fas fa-home"></i> Home</span>
          </a>
          <a class="dropdown-item" href="{{ url_for('main.dashboard') }}">
            <span class="item-label"><i class="fas fa-user"></i> My Account</span> <i class="fas fa-chevron-right ml-2"></i>
          </a>
          <a class="dropdown-item" href="{{ url_for('main.dashboard') }}">
            <span class="item-label"><i class="fas fa-star"></i> Favorites</span>
          </a>
          <a class="dropdown-item" href="{{ url_for('main.dashboard') }}">
            <span class="item-label"><i class="fas fa-chart-line"></i> My Reports</span>
          </a>
          <a class="dropdown-item" href="{{ url_for('main.dashboard') }}">
            <span class="item-label"><i class="fas fa-life-ring"></i> Recovery Assistant</span> <i class="fas fa-chevron-right ml-2"></i>
          </a>
          <div class="dropdown-divider" style="margin:0.5rem 0;"></div>
          <a class="btn btn-outline-danger btn-sm signout-btn text-center" href="{{ url_for('auth.logout') }}" style="width:calc(100% - 2rem);margin:0.5rem 1rem;border-radius:1.5rem;text-align:center;transition:background-color 0.2s;">Sign Out</a>
        </div>
      </div>
    </div>
  </div>
  <!-- Topbar END -->
  <div class="container main-content-spacing" style="margin-top: 8rem; min-height:200px;">
  {% block content %}
  {% endblock %}
  </div>

  <!-- Bootstrap 5 JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Font Awesome JS (optional, for some icon features) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js"></script>
  <!-- Toastr -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
  <!-- Flatpickr -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Then DataTables -->
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
  <!-- Animate.css is CSS only -->
  <!-- AOS.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  <!-- FullCalendar -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.17/index.global.min.js"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
  {% block extra_js %}{% endblock %}

  <script>
  document.addEventListener('DOMContentLoaded', function() {
    var el = document.getElementById('yourElementId');
    if (el) {
      el.onclick = function() { 
        // TODO: Add your click handler code here
        alert('Element clicked!');
      };
    }
  });
  </script>
</body>
</html>